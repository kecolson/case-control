inames[i] <- as.character(iarg[[i]])
else stop("illegal argument (include)")
}
inames[1] <= ""
}
}
names(iarg) <- inames
include <- eval(iarg, data)
}
else {
stop("illegal argument (include)")
}
ni <- length(include)
inames <- names(include)
if (ni > 0) {
for (i in 1:ni) {
if (length(include[[i]]) != n) {
stop("incorrect length for included variable")
}
}
}
grp <- rep(1, n)
pd <- 1
if (m > 0) {
for (im in 1:m) {
v <- match[[im]]
if (length(v) != n)
stop("All vectors must have same length")
if (!is.factor(v))
v <- factor(v)
grp <- grp + pd * (as.numeric(v) - 1)
pd <- pd * length(levels(v))
}
}
nn <- (1 + controls) * sum(fail != 0)
pr <- numeric(nn)
sr <- numeric(nn)
tr <- vector("numeric", nn)
fr <- numeric(nn)
nn <- 0
if (!silent) {
cat("\nSampling risk sets: ")
}
set <- 0
nomatch <- 0
incomplete <- 0
ties <- FALSE
fg <- unique(grp[fail != 0])
for (g in fg) {
ft <- unique(t.exit[(grp == g) & (fail != 0)])
for (tf in ft) {
if (!silent) {
cat(".")
}
set <- set + 1
case <- (grp == g) & (t.exit == tf) & (fail != 0)
ncase <- sum(case)
if (ncase > 1)
ties <- TRUE
noncase <- (grp == g) & (t.entry <= tf) & (t.exit >=
tf) & !case
ncont <- controls * ncase
if (ncont > sum(noncase)) {
ncont <- sum(noncase)
if (ncont > 0)
incomplete <- incomplete + 1
}
if (ncont > 0) {
newnn <- nn + ncase + ncont
sr[(nn + 1):newnn] <- set
tr[(nn + 1):newnn] <- tf
fr[(nn + 1):(nn + ncase)] <- 1
fr[(nn + ncase + 1):newnn] <- 0
pr[(nn + 1):(nn + ncase)] <- (1:n)[case]
pr[(nn + ncase + 1):(newnn)] <- sample((1:n)[noncase],
size = ncont)
nn <- newnn
}
else {
nomatch <- nomatch + ncase
}
}
}
if (!silent) {
cat("\n")
}
res <- vector("list", 4 + m + ni)
if (nn > 0) {
res[[1]] <- sr[1:nn]
res[[2]] <- map <- pr[1:nn]
res[[3]] <- tr[1:nn] + origin[map]
res[[4]] <- fr[1:nn]
}
if (m > 0) {
for (i in 1:m) {
res[[4 + i]] <- match[[i]][map]
}
}
if (ni > 0) {
for (i in 1:ni) {
res[[4 + m + i]] <- include[[i]][map]
}
}
names(res) <- c("Set", "Map", "Time", "Fail", mnames, inames)
if (incomplete > 0)
warning(paste(incomplete, "case-control sets are incomplete"))
if (nomatch > 0)
warning(paste(nomatch, "cases could not be matched"))
if (ties)
warning("there were tied failure times")
data.frame(res)
}
try(sample_test <- ccwcUpdate(entry=0, exit=time, fail=Y, origin=0, controls=1, weights = NULL, match = "age",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample_test <- ccwcUpdate(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "age",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample_test <- ccwcUpdate(entry=0, exit=time, fail=Y, origin=0, controls=1, match = age,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample_test <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "age",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
# Clear workspace
rm(list=ls())
#options(warn = 2, show.error.messages=T) # To help with debugging
######
# Load Packages and functions
######
library("parallel") # For the random seed generation (see below)
library("Epi") # for case-cohort and density sampling designs
library("survival") # for clogit analysis
library("dplyr") # for data management operations
# Source the study, ccwc.weights, sim, and perfomance functions
source('code/study.r')
source('code/ccwc.weights.R')
source('code/sim.r')
source('code/performance.r')
######
## Run simulations of interest to us
## Save and aggregate/summarize performance metrics after each simulation, in case the next one fails.
##
sim1 <- sim(nsims=5, cluster=F, cctype="density", samp="srs", svysize="small", svycase=FALSE, method="expand", ratio=1, match_var="race", exposure="A.50", outcome="Y.02.A.50", timevar="time.Y.02.A.50")
sim1 <- sim(nsims=5, cluster=F, cctype="density", samp="srs", svysize="small", svycase=FALSE, method="expand", ratio=1, match_var="sex", exposure="A.50", outcome="Y.02.A.50", timevar="time.Y.02.A.50")
ccwc.weights
?str2lang
str2lang("x")
parse(text = "x", keep.source=FALSE)[[1]]
parse(text = "list(race,educ)", keep.source=FALSE)[[1]]
source('code/ccwc.weights.R')
try(sample_test <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "age",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
library(Epi)
# prep data for tests
setwd("~/Documents/PhD/github/case-control")# Chris's directory
data <- read.csv("data/population.data.append.csv", stringsAsFactors = F)
exposure="A.50"
outcome="Y.02.A.50"
timevar="time.Y.02.A.50"
data <- data[,c('cluster','strata','serial','county','city','puma','cpuma0010',
'white','black','asian','hispanic','otherrace','male',
'age_18_24','age_25_34','age_35_44','age_45_54','age_55_64','age_over64',
'educ_lesshs','educ_ged','educ_hs','educ_somecollege','educ_associates',
'educ_bachelors','educ_advdegree',paste0("strata.bias.",exposure),
exposure, outcome, timevar, paste0("trueOR.",outcome),paste0('trueIDR.',outcome) )]
data$Y <- data[[outcome]]
data$A <- data[[exposure]]
data$time <- data[[timevar]]
data <- data[,!names(data) %in% c(outcome, exposure, timevar)]
allcases    <- data[data$Y==1,]
allcontrols <- data[data$Y==0,]
Ncases <- nrow(allcases)
Ncontrols <- nrow(allcontrols)
allcases$sampweight <- 1
svysizenum <- 15000
svypop <- allcontrols # Cases excluded from survey
Nsvypop <- nrow(svypop)
control.samp <- svypop[sample(1:Nsvypop, size = svysizenum, replace=F),]
control.samp$sampweight <- 1/(nrow(control.samp)/Nsvypop)
control.samp$sampweight = (control.samp$sampweight/sum(control.samp$sampweight))*(Nsvypop)
control.samp$time <- svypop$time[svypop$Y==0][1]
control.samp$Y <- 0
presample <- rbind(allcases, control.samp)
presample.expnd <- presample[rep(row.names(presample),round(presample$sampweight,0)),]
presample.expnd$race <- 0
presample.expnd$race[presample.expnd$black==1] <- 1
presample.expnd$race[presample.expnd$asian==1] <- 2
presample.expnd$race[presample.expnd$hispanic==1] <- 3
presample.expnd$race[presample.expnd$otherrace==1] <- 4
presample.expnd$race <- as.factor(presample.expnd$race)
levels(presample.expnd$race) <- c("white", "black", "asian", "hispanic", "otherrace")
presample.expnd$age <- 0
presample.expnd$age[presample.expnd$age_25_34==1] <- 1
presample.expnd$age[presample.expnd$age_35_44==1] <- 2
presample.expnd$age[presample.expnd$age_45_54==1] <- 3
presample.expnd$age[presample.expnd$age_55_64==1] <- 4
presample.expnd$age[presample.expnd$age_over64==1] <- 5
presample.expnd$age <- as.factor(presample.expnd$age)
levels(presample.expnd$age) <- c("age_18_24", "age_25_34", "age_35_44", "age_45_54", "age_55_64", "age_over64")
presample.expnd$sex <- presample.expnd$male
presample.expnd$sex <- as.factor(presample.expnd$male)
levels(presample.expnd$sex) <- c("female", "male")
presample.expnd$educ <- 0
presample.expnd$educ[presample.expnd$educ_ged==1] <- 1
presample.expnd$educ[presample.expnd$educ_hs==1] <- 2
presample.expnd$educ[presample.expnd$educ_somecollege==1] <- 3
presample.expnd$educ[presample.expnd$educ_associates==1] <- 4
presample.expnd$educ[presample.expnd$educ_bachelors==1] <- 5
presample.expnd$educ[presample.expnd$educ_advdegree==1] <- 6
presample.expnd$educ <- as.factor(presample.expnd$educ)
levels(presample.expnd$educ) <- c("educ_lesshs", "educ_ged", "educ_hs", "educ_somecollege", "educ_associates", "educ_bachelors", "educ_advdegree")
test <- presample.expnd[sample(1:nrow(presample.expnd), size = 10000),]
source('code/ccwc.weights.R')
try(sample_test <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "age",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "race",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "age",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "sex",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "list(race,sex)",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "list(age,educ)",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "list(race, age, sex,educ)",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NA,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
match_var = NA
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = match_var,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
match_var = NA
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = "race",
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1, match = NULL,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
table(sample$Fail, sample$black)
table(sample$Fail, sample$age_25_34)
table(sample$Fail, sample$male)
table(sample$Fail, sample$educ_bachelors)
source('code/ccwc.weights.R')
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,match = NULL,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
try(sample <- ccwc.weights(entry=0, exit=time, fail=Y, origin=0, controls=1,
include=list(A,black,asian,hispanic,otherrace,age_25_34,age_35_44,
age_45_54,age_55_64,age_over64,male,educ_ged,educ_hs,educ_somecollege,
educ_associates,educ_bachelors,educ_advdegree),
data=test, silent=FALSE))
